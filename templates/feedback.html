{% extends "base.html" %}

{% block title %}Feedback - Share Your Thoughts{% endblock %}

{% block content %}
<div class="feedback-header">
    <h1>Share Your Feedback</h1>
    <p>We value your opinion! Please let us know what you think about our guestbook application.</p>
</div>

<div class="feedback-container">
    <div class="feedback-form-container">
        <form id="feedbackForm" method="POST" action="{{ url_for('feedback') }}" class="feedback-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="name">Your Name *</label>
                    <input type="text" id="name" name="name" required maxlength="100" 
                           placeholder="Enter your name" value="{{ request.form.name | default('') }}">
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" maxlength="255" 
                           placeholder="your.email@example.com" value="{{ request.form.email | default('') }}">
                    <small>Optional - only if you'd like a response</small>
                </div>
            </div>

            <div class="form-group">
                <label for="type">Feedback Type *</label>
                <select id="type" name="type" required>
                    <option value="">Select a category...</option>
                    <option value="general" {% if request.form.type == 'general' %}selected{% endif %}>General Feedback</option>
                    <option value="bug" {% if request.form.type == 'bug' %}selected{% endif %}>Bug Report</option>
                    <option value="feature" {% if request.form.type == 'feature' %}selected{% endif %}>Feature Request</option>
                    <option value="suggestion" {% if request.form.type == 'suggestion' %}selected{% endif %}>Suggestion</option>
                    <option value="complaint" {% if request.form.type == 'complaint' %}selected{% endif %}>Complaint</option>
                    <option value="praise" {% if request.form.type == 'praise' %}selected{% endif %}>Praise</option>
                </select>
            </div>

            <div class="form-group">
                <label for="subject">Subject *</label>
                <input type="text" id="subject" name="subject" required maxlength="200" 
                       placeholder="Brief description of your feedback" value="{{ request.form.subject | default('') }}">
            </div>

            <div class="form-group">
                <label for="message">Your Message *</label>
                <textarea id="message" name="message" required maxlength="2000" 
                          placeholder="Please provide detailed feedback..." rows="8">{{ request.form.message | default('') }}</textarea>
                <div class="form-help">
                    <span id="charCount">0</span>/2000 characters
                    <span id="sentimentIndicator" class="sentiment-indicator"></span>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large" id="submitBtn">
                    Submit Feedback
                </button>
                <button type="reset" class="btn btn-secondary">Clear Form</button>
            </div>

            <div class="form-note">
                <p><small>* Required fields. We review all feedback and may contact you if you provide an email address.</small></p>
            </div>
        </form>
    </div>

    <div class="feedback-info">
        <div class="info-card">
            <h3>üí° Feedback Guidelines</h3>
            <ul>
                <li>Be specific and detailed in your description</li>
                <li>For bug reports, include steps to reproduce</li>
                <li>For feature requests, explain the problem it would solve</li>
                <li>Keep your message respectful and constructive</li>
            </ul>
        </div>

        <div class="info-card">
            <h3>‚è±Ô∏è What to Expect</h3>
            <ul>
                <li>We review all feedback within 24-48 hours</li>
                <li>Bug reports are prioritized based on severity</li>
                <li>Feature requests are considered for future updates</li>
                <li>We may contact you for more information</li>
            </ul>
        </div>

        <div class="info-card">
            <h3>üìä Feedback Statistics</h3>
            <div class="stats-mini">
                <div class="stat-item">
                    <span class="stat-number">{{ feedback_entries|length }}</span>
                    <span class="stat-label">Total Feedback</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ (feedback_entries|selectattr('status', 'equalto', 'resolved')|list|length) }}</span>
                    <span class="stat-label">Resolved</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='feedback.js') }}"></script>
{% endblock %}
